{
	admin off
}

:3000 {
	# Proxy API requests to Node.js
	handle /api/* {
		reverse_proxy 127.0.0.1:8080
	}

	# Serve uploaded files directly
	handle /uploads/* {
		root * /app/data
		file_server
	}

	# Serve static Vue app with SPA fallback
	handle {
		root * /app/web
		try_files {path} /index.html
		file_server
	}

	encode gzip

	@static path *.js *.css *.woff2 *.png *.jpg *.svg *.ico
	header @static Cache-Control "public, max-age=31536000, immutable"
}
